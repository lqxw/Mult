<!DOCTYPE html>
<html id="main">

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Magnifier</title>
<style>
html{
      background: url(solar.jpg) no-repeat center center fixed;
      -webkit-background-size: 100% 100%;
      -moz-background-size: 100% 100%;
      -o-background-size: 100% 100%;
      background-size: 100% 100%;
}

</style>

<!-- -webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover; -->

  </head>
  <body>

    <script type="text/javascript">
      var canvas = document.getElementById('canvas');
      var p1;
      var p2;
      var status;
      var scale = 1.0;

function newStatus() {
    if (scale>=0.98 and scale<=1.02) return status;//do nothing
if (status == 1 && scale < 1) return 1;//first pic
if (scale < 1) return Math.floor(status/10);
if (status == 1 && 0<=p[0] && p[0]<=1 && 0<=p[1] && p[1]<=1 ) return 11;//always
if (status == 11 && 0<=p[0] && p[0]<=0.35 && 0<=p[1] && p[1]<=0.34 ) return 111;
/*
if (status == 11 && 0.51<=p[0] && p[0]<=0.63 && 0<=p[1] && p[1]<=0.21 ) return 112;
if (status == 11 && 0.7<=p[0] && p[0]<=0.87 && 0<=p[1] && p[1]<=0.33 ) return 113;
if (status == 11 && 0<=p[0] && p[0]<=0.5 && 0.45<=p[1] && p[1]<=1 ) return 114;

if (status == 114 && 0.1<=p[0] && p[0]<=0.27 && 0.11<=p[1] && p[1]<=0.32 ) return 1141;
if (status == 114 && 0.28<=p[0] && p[0]<=0.80 && 0.15<=p[1] && p[1]<=0.86 ) return 1142;
if (status == 1141 && 0<=p[0] && p[0]<=1 && 0<=p[1] && p[1]<=1 ) return 11411; //always
if (status == 1142 && 0<=p[0] && p[0]<=1 && 0<=p[1] && p[1]<=1 ) return 11421;
if (status == 11421 && 0<=p[0] && p[0]<=1 && 0<=p[1] && p[1]<=1 ) return 114211;*/
return status;
}

function changeBackPic() {
var width = window.innerWidth;
var height = window.innerHeight;
var point = [ 0.5*(p1[0]+p2[0])/width,0.5*(p1[1]+p2[1])/height];
//alert("point1 is " + p1[0]/width*100 + "% " + p1[1]/height*100+"%");
//alert("point2 is " + p2[0]/width*100 + "% " + p2[1]/height*100+"%");
alert("point is "+point[0]*100 + "% " + point[1]*100+"%");
//document.getElementById('main').style.backgroundImage = "url(Galaxy.jpg)"
}


  document.addEventListener('touchstart', function (event) {
if (event.touches.length >=2) {
          var touch1 = event.touches[0];
var touch2 = event.touches[1];
           p1 = [touch1.pageX,touch1.pageY];
           p2 = [touch2.pageX,touch2.pageY];
        }
      }, false);


/*
// Stop mobile device from native scrolling away on the page
document.body.addEventListener('touchmove', function (event) {
event.preventDefault();
}, false);

document.addEventListener('touchmove', function (event) {
for (var i = 0; i < event.touches.length; i ++) {
var touch = event.touches[i];
var px = touch.pageX;
var py = touch.pageY;
}
}, false);

document.addEventListener('touchend', function () {
}, false);*/

//scale part-------------


     document.addEventListener('gesturechange', function(event) {
      scale = event.scale;
if ( (scale > 1.02 || scale < 0.98) && p1 && p2 ) {
//alert("lalala "+scale+" "+p1+" "+p2);
changeBackPic();
}
    });


    </script>
  

</body></html>
